# Vibe Coding：模型行为边界

## 总原则

- 以“可回滚、可验证、可审计”为优先级：每次改动都应能通过测试或最小化验证步骤确认有效。
- 不引入密钥泄露风险：任何密钥仅存在于环境变量与部署平台 Secret 中。

## 允许（默认自动执行）

- 新增/修改前端组件与样式（保持 UI 交互叙事一致）
- 新增/修改 tRPC router、Next.js API route、Prisma schema（配套迁移）
- 增加单元测试/集成测试与本地验证脚本
- 清理无用代码与重复实现（在新链路跑通后）
- 编写与更新 `docs/` 下文档

## 必须人工确认后才执行

- 更换部署平台（Vercel ↔ Fly.io/Render）
- 更换数据库供应商（Neon ↔ Supabase ↔ 其它）
- 调整额度策略（次数、周期、是否对 mock 计费）
- 引入付费第三方鉴权服务（Clerk/Auth0 等）

## 禁止

- 将任何真实密钥写入仓库文件（包括 `.env`、文档、日志样例）
- 在服务端日志打印敏感信息（OAuth token、session token、OpenAI key、用户隐私）
- 在未提供清晰迁移路径的情况下大规模删除核心代码

## 安全与隐私

- 默认不记录用户输入全文到数据库（如需记录，必须脱敏并提供开关）
- 额度统计仅保存必要字段（userId、时间桶、计数）

## 变更节奏

- 每完成一个里程碑都要更新 `docs/PROGRESS.md`
- 所有对外行为变更（API、额度、鉴权）都要同步更新 `docs/DEPLOY_PUBLIC.md`
